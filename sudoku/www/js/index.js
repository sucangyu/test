!function(e){var n={};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)r.d(t,a,function(n){return e[n]}.bind(null,a));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=1)}([function(e,n,r){"use strict";var t=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();var a={makeRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=new Array(9);return n.fill(e),n},makeMatrix:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Array.from({length:9},function(){return e.makeRow(n)})},shuffle:function(e){for(var n=e.length-2,r=0;r<=n;r++){var t=r+Math.floor(Math.random()*(e.length-r)),a=[e[t],e[r]];e[r]=a[0],e[t]=a[1]}return e},checkFillable:function(e,n,r,t){for(var a=e[r],i=this.makeRow().map(function(n,r){return e[r][t]}),u=o.convertToBoxIndex(r,t).boxIndex,c=o.getBoxCells(e,u),s=0;s<9;s++)if(a[s]===n||i[s]===n||c[s]===n)return!1;return!0}},o={getBoxCells:function(e,n){for(var r=3*Math.floor(n/3),t=n%3*3,a=[],o=0;o<9;o++){var i=r+Math.floor(o/3),u=t+o%3;a.push(e[i][u])}return a},convertToBoxIndex:function(e,n){return{boxIndex:3*Math.floor(e/3)+Math.floor(n/3),cellIndex:e%3*3+n%3}},convertFromBoxIndex:function(e,n){return{rowIndex:3*Math.floor(e/3)+Math.floor(n/3),colIndex:e%3*3+n%3}}};e.exports=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,null,[{key:"matrix",get:function(){return a}},{key:"box",get:function(){return o}}]),e}()},function(e,n,r){"use strict";var t=r(2),a=r(6),o=new t($("#container"));o.build(),o.layout();var i=new a($("#popupNumbers"));o.bindPopup(i),$("#check").on("click",function(e){o.check()&&alert("成功了")}),$("#reset").on("click",function(e){o.reset()}),$("#clear").on("click",function(e){o.clear()}),$("#rebuild").on("click",function(e){o.rebuild()})},function(e,n,r){"use strict";var t=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();r(0);var a=r(3),o=r(5),i=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._$container=n}return t(e,[{key:"build",value:function(){var e=new a;e.make();var n=e.solutionMatrix,r=["row_g_top","row_g_middle","row_g_bottom"],t=["col_g_left","col_g_center","col_g_right"],o=n.map(function(e){return e.map(function(e,n){return $("<span>").addClass(t[n%3]).addClass(e?"fixed":"empty").text(e)})}).map(function(e,n){return $("<div>").addClass("row").addClass(r[n%3]).append(e)});this._$container.append(o)}},{key:"layout",value:function(){var e=$("span:first",this._$container).width();$("span",this._$container).height(e).css({"line-height":e+"px","font-size":e<32?e/2+"px":""})}},{key:"check",value:function(){var e=this._$container.children().map(function(e,n){return $(n).children().map(function(e,n){return parseInt($(n).text())||0})}).toArray().map(function(e){return e.toArray()}),n=new o(e);if(n.check())return!0;var r=n.matrixMarks;this._$container.children().each(function(e,n){$(n).children().each(function(n,t){var a=$(t);a.is(".fixed")||r[e][n]?a.removeClass("error"):a.addClass("error")})})}},{key:"reset",value:function(){this._$container.find("span:not(.fixed)").removeClass("error mark1 mark2").addClass("empty").text(0)}},{key:"clear",value:function(){this._$container.find("span.error").removeClass("error")}},{key:"rebuild",value:function(){this._$container.empty(),this.build(),this.layout()}},{key:"bindPopup",value:function(e){this._$container.on("click","span",function(n){var r=$(n.target);r.hasClass("fixed")||e.popup(r)})}}]),e}();e.exports=i},function(e,n,r){"use strict";var t=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();var a=r(4);e.exports=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new a;n.generate(),this.solutionMatrix=n.matrix}return t(e,[{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.puzzleMatrix=this.solutionMatrix.map(function(n){return n.map(function(n){return 9*Math.random()<e?0:n})})}}]),e}()},function(e,n,r){"use strict";var t=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();var a=r(0);e.exports=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,[{key:"generate",value:function(){for(;!this.internalGenerate();)console.warn("try again")}},{key:"internalGenerate",value:function(){this.matrix=a.matrix.makeMatrix(),this.orders=a.matrix.makeMatrix().map(function(e){return e.map(function(e,n){return n})}).map(function(e){return a.matrix.shuffle(e)});for(var e=1;e<=9;e++)if(!this.fillNumber(e))return!1;return!0}},{key:"fillNumber",value:function(e){return this.fillRow(e,0)}},{key:"fillRow",value:function(e,n){if(n>8)return!0;for(var r=this.matrix[n],t=this.orders[n],o=0;o<9;o++){var i=t[o];if(!r[i]&&a.matrix.checkFillable(this.matrix,e,n,i)){if(r[i]=e,this.fillRow(e,n+1))return!0;r[i]=0}}return!1}}]),e}()},function(e,n,r){"use strict";var t=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();function a(e){var n=e.length,r=new Array(n);r.fill(!0);for(var t=0;t<n;t++)if(r[t]){var a=e[t];if(a)for(var o=t+1;o<n;o++)a===e[o]&&(r[t]=r[o]=!1);else r[t]=!1}return r}var o=r(0);e.exports=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._matrix=n,this._matrixMarks=o.matrix.makeMatrix(!0)}return t(e,[{key:"check",value:function(){return this.checkRows(),this.checkCols(),this.checkBoxes(),this._success=this._matrixMarks.every(function(e){return e.every(function(e){return e})}),this._success}},{key:"checkRows",value:function(){for(var e=0;e<9;e++)for(var n=a(this._matrix[e]),r=0;r<n.length;r++)n[r]||(this._matrixMarks[e][r]=!1)}},{key:"checkCols",value:function(){for(var e=0;e<9;e++){for(var n=[],r=0;r<9;r++)n[r]=this._matrix[r][e];for(var t=a(n),o=0;o<t.length;o++)t[o]||(this._matrixMarks[o][e]=!1)}}},{key:"checkBoxes",value:function(){for(var e=0;e<9;e++)for(var n=a(o.box.getBoxCells(this._matrix,e)),r=0;r<9;r++)if(!n[r]){var t=o.box.convertFromBoxIndex(e,r),i=t.rowIndex,u=t.colIndex;this.matrixMarks[i][u]=!1}}},{key:"matrixMarks",get:function(){return this._matrixMarks}},{key:"isSuccess",get:function(){return this._success}}]),e}()},function(e,n,r){"use strict";var t=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();e.exports=function(){function e(n){var r=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._$panel=n.hide().removeClass("hidden"),this._$panel.on("click","span",function(e){var n=r._$targetCell,t=$(e.target);n.hasClass("fixed")||(t.hasClass("mark1")?n.hasClass("mark1")?n.removeClass("mark1"):n.removeClass("mark2").addClass("mark1"):t.hasClass("mark2")?n.hasClass("mark2")?n.removeClass("mark2"):n.removeClass("mark1").addClass("mark2"):t.hasClass("empty")?n.text(0).addClass("empty"):n.removeClass("empty").text(t.text())),r.hide()})}return t(e,[{key:"popup",value:function(e){this._$targetCell=e;var n=e.position(),r=n.left,t=n.top;this._$panel.css({left:r+"px",top:t+"px"}).show()}},{key:"hide",value:function(){this._$panel.hide()}}]),e}()}]);
//# sourceMappingURL=index.js.map