!function(e){var r={};function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)n.d(t,a,function(r){return e[r]}.bind(null,a));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=3)}([function(e,r,n){"use strict";var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();var a={makeRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=new Array(9);return r.fill(e),r},makeMatrix:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Array.from({length:9},function(){return e.makeRow(r)})},shuffle:function(e){for(var r=e.length-2,n=0;n<=r;n++){var t=n+Math.floor(Math.random()*(e.length-n)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e},checkFillable:function(e,r,n,t){for(var a=e[n],o=this.makeRow().map(function(r,n){return e[n][t]}),u=i.convertToBoxIndex(n,t).boxIndex,c=i.getBoxCells(e,u),l=0;l<9;l++)if(a[l]===r||o[l]===r||c[l]===r)return!1;return!0}},i={getBoxCells:function(e,r){for(var n=3*Math.floor(r/3),t=r%3*3,a=[],i=0;i<9;i++){var o=n+Math.floor(i/3),u=t+i%3;a.push(e[o][u])}return a},convertToBoxIndex:function(e,r){return{boxIndex:3*Math.floor(e/3)+Math.floor(r/3),cellIndex:e%3*3+r%3}},convertFromBoxIndex:function(e,r){return{rowIndex:3*Math.floor(e/3)+Math.floor(r/3),colIndex:e%3*3+r%3}}};e.exports=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,null,[{key:"matrix",get:function(){return a}},{key:"box",get:function(){return i}}]),e}()},function(e,r,n){"use strict";var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();var a=n(0);e.exports=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,[{key:"generate",value:function(){for(;!this.internalGenerate();)console.warn("try again")}},{key:"internalGenerate",value:function(e){this.matrix=e,this.orders=e.map(function(e){return e.map(function(e,r){return r})}).map(function(e){return a.matrix.shuffle(e)});for(var r=1;r<=9;r++)if(!this.fillNumber(r))return!1;return!0}},{key:"fillNumber",value:function(e){return this.fillRow(e,0)}},{key:"fillRow",value:function(e,r){if(r>8)return!0;for(var n=this.matrix[r],t=this.orders[r],i=0;i<9;i++){var o=t[i];if(!n[o]&&a.matrix.checkFillable(this.matrix,e,r,o)){if(n[o]=e,this.fillRow(e,r+1))return console.log(n),!0;n[o]=0}}return!1}}]),e}()},function(e,r,n){"use strict";var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();e.exports=function(){function e(r){var n=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._$panel=r.hide().removeClass("hidden"),this._$panel.on("click","span",function(e){var r=n._$targetCell,t=$(e.target);r.hasClass("fixed")||(t.hasClass("mark1")?r.hasClass("mark1")?r.removeClass("mark1"):r.removeClass("mark2").addClass("mark1"):t.hasClass("mark2")?r.hasClass("mark2")?r.removeClass("mark2"):r.removeClass("mark1").addClass("mark2"):t.hasClass("empty")?r.text(0).addClass("empty"):r.removeClass("empty").text(t.text())),n.hide()})}return t(e,[{key:"popup",value:function(e){this._$targetCell=e;var r=e.position(),n=r.left,t=r.top;this._$panel.css({left:n+"px",top:t+"px"}).show()}},{key:"hide",value:function(){this._$panel.hide()}}]),e}()},function(e,r,n){"use strict";var t=n(4),a=n(2),i=new t($("#container"));i.build(),i.layout();var o=new a($("#popupNumbers"));i.bindPopup(o),$("#check").on("click",function(e){i.check()&&alert("成功了")}),$("#reset").on("click",function(e){i.reset()}),$("#clear").on("click",function(e){i.clear()}),$("#rebuild").on("click",function(e){i.rebuild()})},function(e,r,n){"use strict";var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();n(0),n(1);var a=n(5),i=n(7),o=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._$container=r}return t(e,[{key:"build",value:function(){var e=new a;e.make();var r=e.puzzleMatrix,n=["row_g_top","row_g_middle","row_g_bottom"],t=["col_g_left","col_g_center","col_g_right"],i=r.map(function(e){return e.map(function(e,r){return $("<span>").addClass(t[r%3]).addClass(e?"fixed":"empty").text(e)})}).map(function(e,r){return $("<div>").addClass("row").addClass(n[r%3]).append(e)});this._$container.append(i)}},{key:"layout",value:function(){var e=$("span:first",this._$container).width();$("span",this._$container).height(e).css({"line-height":e+"px","font-size":e<32?e/2+"px":""})}},{key:"check",value:function(){var e=this._$container.children().map(function(e,r){return $(r).children().map(function(e,r){return parseInt($(r).text())||0})}).toArray().map(function(e){return e.toArray()}),r=new i(e);if(r.check())return!0;var n=r.matrixMarks;this._$container.children().each(function(e,r){$(r).children().each(function(r,t){var a=$(t);a.is(".fixed")||n[e][r]?a.removeClass("error"):a.addClass("error")})})}},{key:"reset",value:function(){this._$container.find("span:not(.fixed)").removeClass("error mark1 mark2").addClass("empty").text(0)}},{key:"clear",value:function(){this._$container.find("span.error").removeClass("error")}},{key:"rebuild",value:function(){this._$container.empty(),this.build(),this.layout()}},{key:"bindPopup",value:function(e){this._$container.on("click","span",function(r){var n=$(r.target);n.hasClass("fixed")||e.popup(n)})}}]),e}();e.exports=o},function(e,r,n){"use strict";var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();var a=n(6);e.exports=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new a;r.generate(),this.solutionMatrix=r.matrix}return t(e,[{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.puzzleMatrix=this.solutionMatrix.map(function(r){return r.map(function(r){return 9*Math.random()<e?0:r})})}}]),e}()},function(e,r,n){"use strict";var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();var a=n(0);e.exports=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,[{key:"generate",value:function(){for(;!this.internalGenerate();)console.warn("try again")}},{key:"internalGenerate",value:function(){this.matrix=a.matrix.makeMatrix(),this.orders=a.matrix.makeMatrix().map(function(e){return e.map(function(e,r){return r})}).map(function(e){return a.matrix.shuffle(e)});for(var e=1;e<=9;e++)if(!this.fillNumber(e))return!1;return!0}},{key:"fillNumber",value:function(e){return this.fillRow(e,0)}},{key:"fillRow",value:function(e,r){if(r>8)return!0;for(var n=this.matrix[r],t=this.orders[r],i=0;i<9;i++){var o=t[i];if(!n[o]&&a.matrix.checkFillable(this.matrix,e,r,o)){if(n[o]=e,this.fillRow(e,r+1))return!0;n[o]=0}}return!1}}]),e}()},function(e,r,n){"use strict";var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();function a(e){var r=e.length,n=new Array(r);n.fill(!0);for(var t=0;t<r;t++)if(n[t]){var a=e[t];if(a)for(var i=t+1;i<r;i++)a===e[i]&&(n[t]=n[i]=!1);else n[t]=!1}return n}var i=n(0);e.exports=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._matrix=r,this._matrixMarks=i.matrix.makeMatrix(!0)}return t(e,[{key:"check",value:function(){return this.checkRows(),this.checkCols(),this.checkBoxes(),this._success=this._matrixMarks.every(function(e){return e.every(function(e){return e})}),this._success}},{key:"checkRows",value:function(){for(var e=0;e<9;e++)for(var r=a(this._matrix[e]),n=0;n<r.length;n++)r[n]||(this._matrixMarks[e][n]=!1)}},{key:"checkCols",value:function(){for(var e=0;e<9;e++){for(var r=[],n=0;n<9;n++)r[n]=this._matrix[n][e];for(var t=a(r),i=0;i<t.length;i++)t[i]||(this._matrixMarks[i][e]=!1)}}},{key:"checkBoxes",value:function(){for(var e=0;e<9;e++)for(var r=a(i.box.getBoxCells(this._matrix,e)),n=0;n<9;n++)if(!r[n]){var t=i.box.convertFromBoxIndex(e,n),o=t.rowIndex,u=t.colIndex;this.matrixMarks[o][u]=!1}}},{key:"matrixMarks",get:function(){return this._matrixMarks}},{key:"isSuccess",get:function(){return this._success}}]),e}()}]);
//# sourceMappingURL=index.js.map